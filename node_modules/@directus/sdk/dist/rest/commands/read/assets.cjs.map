{"version":3,"file":"assets.cjs","names":[],"sources":["../../../../src/rest/commands/read/assets.ts"],"sourcesContent":["import type { DirectusFile } from '../../../schema/file.js';\nimport type { AssetsQuery } from '../../../types/index.js';\nimport { throwIfEmpty } from '../../utils/index.js';\nimport type { RestCommand } from '../../types.js';\n\n/**\n * Read the contents of a file as a ReadableStream\n *\n * @param {string} key\n * @param {AssetsQuery} query\n * @returns {ReadableStream<Uint8Array>}\n */\nexport const readAssetRaw =\n\t<Schema>(key: DirectusFile<Schema>['id'], query?: AssetsQuery): RestCommand<ReadableStream<Uint8Array>, Schema> =>\n\t() => {\n\t\tthrowIfEmpty(String(key), 'Key cannot be empty');\n\n\t\treturn {\n\t\t\tpath: `/assets/${key}`,\n\t\t\tparams: query ?? {},\n\t\t\tmethod: 'GET',\n\t\t\tonResponse: (response) => response.body,\n\t\t};\n\t};\n\n/**\n * Read the contents of a file as a Blob\n *\n * @param {string} key\n * @param {AssetsQuery} query\n * @returns {Blob}\n */\nexport const readAssetBlob =\n\t<Schema>(key: DirectusFile<Schema>['id'], query?: AssetsQuery): RestCommand<Blob, Schema> =>\n\t() => {\n\t\tthrowIfEmpty(String(key), 'Key cannot be empty');\n\n\t\treturn {\n\t\t\tpath: `/assets/${key}`,\n\t\t\tparams: query ?? {},\n\t\t\tmethod: 'GET',\n\t\t\tonResponse: (response) => response.blob(),\n\t\t};\n\t};\n\n/**\n * Read the contents of a file as a ArrayBuffer\n *\n * @param {string} key\n * @param {AssetsQuery} query\n * @returns {ArrayBuffer}\n */\nexport const readAssetArrayBuffer =\n\t<Schema>(key: DirectusFile<Schema>['id'], query?: AssetsQuery): RestCommand<ArrayBuffer, Schema> =>\n\t() => {\n\t\tthrowIfEmpty(String(key), 'Key cannot be empty');\n\n\t\treturn {\n\t\t\tpath: `/assets/${key}`,\n\t\t\tparams: query ?? {},\n\t\t\tmethod: 'GET',\n\t\t\tonResponse: (response) => response.arrayBuffer(),\n\t\t};\n\t};\n"],"mappings":"kDAYa,GACH,EAAiC,SAEzC,EAAA,aAAa,OAAO,EAAI,CAAE,sBAAsB,CAEzC,CACN,KAAM,WAAW,IACjB,OAAQ,GAAS,EAAE,CACnB,OAAQ,MACR,WAAa,GAAa,EAAS,KACnC,EAUU,GACH,EAAiC,SAEzC,EAAA,aAAa,OAAO,EAAI,CAAE,sBAAsB,CAEzC,CACN,KAAM,WAAW,IACjB,OAAQ,GAAS,EAAE,CACnB,OAAQ,MACR,WAAa,GAAa,EAAS,MAAM,CACzC,EAUU,GACH,EAAiC,SAEzC,EAAA,aAAa,OAAO,EAAI,CAAE,sBAAsB,CAEzC,CACN,KAAM,WAAW,IACjB,OAAQ,GAAS,EAAE,CACnB,OAAQ,MACR,WAAa,GAAa,EAAS,aAAa,CAChD"}